(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{268:function(e,t,n){e.exports=n(449)},449:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(47),u=n.n(c),l=n(24),o=n(21),i=n(13),s=n.n(i),m=n(15),p=n(16),f=n(27),E=n.n(f),d=n(20),g=function(){var e=k();return null!==e?JSON.parse(e):null},b=function(e){return{type:"SET_USER",user:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.user;default:return e}},v=function(){var e=Object(m.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(w(),"/health"),e.next=3,E.a.get(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){return Object(o.h)().pathname},j=function(){var e=Object(o.g)(),t=Object(p.c)();return function(){window.localStorage.clear(),t(b(null)),e.push("/signin")}},S=function(e){window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(e))},k=function(){return window.localStorage.getItem("loggedBlogAppUser")},w=function(){return console.log("Using BackendUrl: ".concat("http://localhost:3001")),"http://localhost:3001"},y="".concat(w(),"/auth"),x=function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(y,"/signin"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(y,"/signup"),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=void 0,N=function(e,t){return function(){var n=Object(m.a)(s.a.mark((function n(a){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"SET_NOTIFICATION",notification:e}),void 0!==C&&clearTimeout(C),C=setTimeout((function(){return a({type:"SET_NOTIFICATION",notification:null})}),t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.notification;default:return e}},R="".concat(w(),"/api/blogs"),T=function(){var e=Object(m.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"bearer ".concat(n)}},e.next=3,E.a.post(R,t,a).catch((function(e){throw e.response.data.error}));case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(m.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(R,"/").concat(t,"/comments"),n).catch((function(e){throw e.response.data.error}));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(m.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"bearer ".concat(n)}},e.next=3,E.a.delete("".concat(R,"/").concat(t),a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(m.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:"bearer ".concat(n)}},e.next=3,E.a.patch("".concat(R,"/").concat(t,"/likes"),{},a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(e){return function(){var t=Object(m.a)(s.a.mark((function t(n,a){var r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().user.token,t.next=3,B(e.id,r);case 3:c=t.sent,n({type:"LIKE_BLOG",data:c});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},L=function(){return function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(R).then((function(e){return e.data}));case 2:n=e.sent,t({type:"GET_BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_BLOG":case"LIKE_BLOG":case"DELETE_BLOG":return e;case"GET_BLOGS":return t.data.sort((function(e,t){return t.likes-e.likes}));default:return e}},P=n(472),G=n(473),H=n(462),F=n(474),z=n(257),Q=n(469),q=n(232),J=n(459),W=n(470),K=n(464),V=n(256),X=n(86),Y={signInRequiredModalOpenness:!1},Z=function(){return{type:"SET_SIGNIN_REQUIRED_MODAL_OPENNESS",openness:!0}},$=n(126),ee={setTimedNotification:N,getBlogs:L,createBlog:function(e){return function(){var t=Object(m.a)(s.a.mark((function t(n,a){var r,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().user.token,t.next=3,T(e,r);case 3:c=t.sent,n({type:"NEW_BLOG",data:c});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},te=Object(p.b)((function(e){return{user:e.user}}),ee)((function(e){var t=e.user,n=e.openness,c=e.open,u=e.close,l=e.setTimedNotification,i=e.getBlogs,p=e.createBlog,f=Object(a.useState)({title:"",content:""}),E=Object(d.a)(f,2),g=E[0],b=E[1],h=Object(o.g)(),v=j(),O=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l({type:"OK",message:"new blog ".concat(g.title," is being added")},5e3),e.next=4,p(g);case 4:b({author:"",title:"",url:""}),i(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),"jwt expired"===e.t0?(b({author:"",title:"",url:""}),v(),l({type:"ERROR",message:"Expired session"},5e3)):l({type:"ERROR",message:e.t0},5e3);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement($.a,{onClose:function(){return u()},onOpen:function(){return c()},open:n},r.a.createElement($.a.Header,null,"Add blog"),r.a.createElement($.a.Content,null,r.a.createElement(H.a,null,r.a.createElement(H.a.Field,null,r.a.createElement("label",null,"Title"),r.a.createElement("input",{value:g.title,onChange:function(e){var t=e.target;return b(Object(X.a)({},g,{title:t.value}))}})),r.a.createElement(H.a.Field,null,r.a.createElement("label",null,"Content"),r.a.createElement("input",{value:g.content,onChange:function(e){var t=e.target;return b(Object(X.a)({},g,{content:t.value}))}})))),r.a.createElement($.a.Actions,null,r.a.createElement(z.a,{color:"black",onClick:function(){return u()}}," Cancel"),r.a.createElement(z.a,{content:"Save",labelPosition:"right",icon:"checkmark",onClick:function(e){t?(e.preventDefault(),O(),u()):h.push("/signin")},positive:!0})))})),ne={open:Z,close:function(){return{type:"SET_SIGNIN_REQUIRED_MODAL_OPENNESS",openness:!1}}},ae=Object(p.b)((function(e){return{openness:e.layout.signInRequiredModalOpenness}}),ne)((function(e){var t=e.openness,n=e.open,a=e.close,c=Object(o.g)();return r.a.createElement($.a,{open:t,onClose:function(){return a()},onOpen:function(){return n()}},r.a.createElement($.a.Header,null,"Sign in required"),r.a.createElement($.a.Actions,null,r.a.createElement(z.a,{color:"black",onClick:function(){return a()}}," Cancel"),r.a.createElement(z.a,{content:"Sign in",labelPosition:"right",icon:"checkmark",onClick:function(e){a(),c.push("/signin")},positive:!0})))})),re=null,ce=function(){re=Object(p.c)();var e=Object(p.d)((function(e){return e.notification}));return void 0!==e&&null!==e&&""!==e.message?function(e,t){var n=null,a="";switch(e){case"ERROR":n={negative:!0},a="Error";break;case"OK":n={positive:!0},a="Success";break;default:n={info:!0},a="Info"}return r.a.createElement(Q.a,Object.assign({},n,{onDismiss:function(){return re({type:"SET_NOTIFICATION",notification:null})}}),r.a.createElement(Q.a.Header,null,a),r.a.createElement("p",null,t))}(e.type,e.message):r.a.createElement(r.a.Fragment,null)},ue=function(e){var t=e.children,n=e.Media,c=O(),u=Object(o.g)(),l=Object(p.c)(),i=Object(p.d)((function(e){return e.user})),s=j(),m=Object(a.useState)(!1),f=Object(d.a)(m,2),E=f[0],g=f[1],b=function(){return g(!0)};return r.a.createElement(n,{greaterThan:"mobile"},r.a.createElement(te,{openness:E,open:b,close:function(){return g(!1)}}),r.a.createElement(ae,null),"/signin"!==c&&"/signup"!==c&&r.a.createElement(J.a,null,r.a.createElement(W.a,{fixed:"top",size:"large",inverted:!0},r.a.createElement(J.a,null,r.a.createElement(K.a,{item:!0,simple:!0,text:"Blogs",onClick:function(){u.push("/blogs")}},r.a.createElement(K.a.Menu,null,r.a.createElement(K.a.Item,{onClick:function(){i?b():l({type:"SET_SIGNIN_REQUIRED_MODAL_OPENNESS",openness:!0})}},"Add blog"))),r.a.createElement(W.a.Item,{as:"a",active:"/users"===c,onClick:function(){u.push("/users")}}," Users"),i?r.a.createElement(W.a.Item,{position:"right"},r.a.createElement(V.a,{src:"https://react.semantic-ui.com/images/avatar/large/patrick.png",avatar:!0}),r.a.createElement("span",null,r.a.createElement(K.a,{inline:!0,text:null===i?"":i.name},r.a.createElement(K.a.Menu,null,r.a.createElement(K.a.Item,{text:"Logout",onClick:function(){s()}}))))):r.a.createElement(W.a.Item,{position:"right",as:"a",onClick:function(){u.push("/signin")}}," Sign in")))),r.a.createElement(J.a,{style:{marginTop:"65px"},inverted:!0},t,r.a.createElement(ce,null)))},le=n(471),oe=n(56),ie=n(460),se=function(e){var t=e.children,n=e.Media,c=Object(a.useState)(!1),u=Object(d.a)(c,2),l=u[0],i=u[1],s=Object(a.useState)(!1),m=Object(d.a)(s,2),f=(m[0],m[1]),E=function(){i(!1),f(!1)},g=O(),h=Object(o.g)(),v=Object(p.c)(),j=Object(p.d)((function(e){return e.user})),S=Object(a.useState)(!1),k=Object(d.a)(S,2),w=k[0],y=k[1];return r.a.createElement(n,{as:le.a.Pushable,at:"mobile"},r.a.createElement(te,{openness:w,open:function(){return y(!0)},close:function(){return y(!1)}}),r.a.createElement(ae,null),"/signin"!==g&&"/signup"!==g&&r.a.createElement(J.a,null,r.a.createElement(W.a,{inverted:!0,fixed:"top"},r.a.createElement(W.a.Item,{onClick:function(){i(!0),f(!0)}},r.a.createElement(oe.a,{name:"sidebar"})),r.a.createElement(W.a.Item,{position:"right",onClick:function(){j?y(!0):v({type:"SET_SIGNIN_REQUIRED_MODAL_OPENNESS",openness:!0})}},r.a.createElement(oe.a,{name:"add"})," Add blog "))),r.a.createElement(le.a.Pushable,{style:{height:"100vh",transform:"none"}},r.a.createElement(ie.a,null,r.a.createElement(le.a,{as:W.a,animation:"overlay",onHide:E,visible:l,inverted:!0,vertical:!0,width:"thin"},j&&r.a.createElement(W.a.Item,{as:"div",onClick:function(){E()}},r.a.createElement(V.a,{src:"https://react.semantic-ui.com/images/avatar/large/patrick.png",avatar:!0}),null===j?"":j.username),r.a.createElement(W.a.Item,{as:"a",onClick:function(){E(),h.push("/blogs")},active:"/"===g}," Blogs"),r.a.createElement(W.a.Item,{as:"a",onClick:function(){E(),h.push("/users")},active:"/users"===g}," Users"),j?r.a.createElement(W.a.Item,{as:"a",onClick:function(){window.localStorage.clear(),v(b(null)),i(!1),h.push("/signin")}}," Log out"):r.a.createElement(W.a.Item,{as:"a",onClick:function(){h.push("/signin")}}," Sign in"))),r.a.createElement(le.a.Pusher,{dimmed:l},r.a.createElement(J.a,{style:{marginTop:"50px"}},r.a.createElement(ce,null),t))))},me=Object(q.createMedia)({breakpoints:{mobile:0,tablet:768,computer:1024}}),pe=me.MediaContextProvider,fe=me.Media,Ee=function(e){var t=e.children;return(r.a.createElement(pe,null,r.a.createElement(ue,{Media:fe},t),r.a.createElement(se,{Media:fe},t)))},de=function(e){var t=e.onSubmitUser,n=e.mode,c=Object(a.useState)(""),u=Object(d.a)(c,2),l=u[0],o=u[1],i=Object(a.useState)(""),s=Object(d.a)(i,2),m=s[0],p=s[1];if("Sign In"===n||"Sign Up"===n)return r.a.createElement(Ee,null,r.a.createElement(P.a,{textAlign:"center",verticalAlign:"middle"},r.a.createElement(P.a.Column,{style:{maxWidth:450}},r.a.createElement(G.a,{as:"h2",color:"teal",textAlign:"center"},"BlogList ",n),r.a.createElement(H.a,{size:"large",onSubmit:function(e){e.preventDefault(),t(l,m)}},r.a.createElement(F.a,{stacked:!0},r.a.createElement(H.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"User",value:l,onChange:function(e){var t=e.target;return o(t.value)}}),r.a.createElement(H.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",value:m,onChange:function(e){var t=e.target;return p(t.value)}}),r.a.createElement(z.a,{color:"teal",fluid:!0,size:"large",type:"submit"}," ",n))),"Sign In"===n?r.a.createElement(Q.a,null,"New to us? ",r.a.createElement("a",{href:"/signup"},"Sign Up")):r.a.createElement(Q.a,null,"Already registered? ",r.a.createElement("a",{href:"/signin"},"Sign In")))))},ge={setTimedNotification:N,setUser:b,getBlogs:L},be=Object(p.b)((function(e){return{user:e.user}}),ge)((function(e){var t=e.user,n=e.setUser,c=e.setTimedNotification,u=e.getBlogs,l=Object(o.g)();Object(a.useEffect)((function(){(k()||t)&&l.push("/blogs")}),[t]);var i=function(){var e=Object(m.a)(s.a.mark((function e(t,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({username:t,password:a});case 3:r=e.sent,S(r),n(r),u(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c({type:"ERROR",message:"Wrong credentials"},5e3);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(de,{onSubmitUser:i,mode:"Sign In"})})),he={setTimedNotification:N,setUser:b},ve=Object(p.b)((function(e){return{user:e.user}}),he)((function(e){var t=e.user,n=e.setUser,c=e.setTimedNotification,u=Object(o.g)();Object(a.useEffect)((function(){(k()||t)&&u.push("/blogs")}),[t]);var l=function(){var e=Object(m.a)(s.a.mark((function e(t,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I({username:t,password:a});case 3:r=e.sent,S(r),n(r),u.push("/blogs"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),c({type:"ERROR",message:"Error creating user"},5e3);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(de,{onSubmitUser:l,mode:"Sign Up"})})),Oe=n(466),je=n(468),Se=function(e){var t=e.blog,n=e.signedUser,a=Object(o.g)(),c=Object(o.h)(),u=Object(p.c)(),i=function(){var e=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,u(D(t));case 3:u(L()),e.next=7;break;case 6:u({type:"SET_SIGNIN_REQUIRED_MODAL_OPENNESS",openness:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!==t?r.a.createElement(je.a,{fluid:!0},r.a.createElement(je.a.Content,null,r.a.createElement(V.a,{floated:"right",size:"mini",src:"https://react.semantic-ui.com/images/avatar/large/steve.jpg"}),r.a.createElement(je.a.Header,null,r.a.createElement(l.b,{onClick:function(){n||u({type:"SET_SIGNIN_REQUIRED_MODAL_OPENNESS",openness:!0})},to:n?"/users/".concat(t.user.id):c.pathname}," ",t.user.username)),r.a.createElement(je.a.Description,null,t.title)),r.a.createElement(je.a.Content,{extra:!0},r.a.createElement("span",{style:{marginRight:10}},r.a.createElement(oe.a,{name:t.likes.includes(null===n||void 0===n?void 0:n.id)?"thumbs up":"thumbs up outline",style:{cursor:"pointer"},onClick:function(){i(t)}})," ",t.likes.length),r.a.createElement("span",null,r.a.createElement(oe.a,{name:"comments",style:{cursor:"pointer"},onClick:function(){a.push("/blogs/".concat(t.id))}})," ",t.comments.length))):r.a.createElement(r.a.Fragment,null)},ke={getBlogs:L},we=Object(p.b)((function(e){return{blogs:e.blogs,user:e.user}}),ke)((function(e){var t=e.blogs,n=e.user,c=e.getBlogs;return Object(a.useEffect)((function(){c()}),[]),r.a.createElement(Ee,null,r.a.createElement(Oe.a,null,t.map((function(e){return r.a.createElement(Se,{blog:e,signedUser:n,key:e.id})}))))})),ye="".concat(w(),"/api/users"),xe={getAll:function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(ye);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Ie=n(467),Ce=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){xe.getAll().then((function(e){return c(e)}))}),[]),r.a.createElement(Ee,null,r.a.createElement(Ie.a,{unstackable:!0,style:{height:"100vh"}},r.a.createElement(Ie.a.Header,null,r.a.createElement(Ie.a.Row,null,r.a.createElement(Ie.a.HeaderCell,null,"User"),r.a.createElement(Ie.a.HeaderCell,null,"Posted blogs"))),r.a.createElement(Ie.a.Body,null,n.map((function(e){return r.a.createElement(Ie.a.Row,{key:e.id},r.a.createElement(Ie.a.Cell,null,r.a.createElement(G.a,{as:"h4"},r.a.createElement(G.a.Content,null,r.a.createElement(l.b,{to:"/users/".concat(e.id)},e.username)))),r.a.createElement(Ie.a.Cell,null,e.blogs.length))})))))},Ne=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],c=t[1],u=Object(o.i)("/users/:id");return Object(a.useEffect)((function(){var e=u?u.params.id:null;xe.getAll().then((function(t){var n=t.find((function(t){return t.id===e}));c(n)}))}),[]),n?r.a.createElement(Ee,null,r.a.createElement(J.a,{style:{height:"100vh"}},r.a.createElement(G.a,null,n.name),r.a.createElement(G.a.Subheader,null,"Added blogs:"),r.a.createElement("ul",null,r.a.createElement(Oe.a,{divided:!0,relaxed:!0},n.blogs.map((function(e){return r.a.createElement(Oe.a.Item,{key:e.id},r.a.createElement(Oe.a.Content,null,r.a.createElement(Oe.a.Header,null,r.a.createElement(l.b,{to:"/blogs/".concat(e.id)},e.title))))})))))):null},_e=n(461),Re=n(465),Te={deleteBlog:function(e){return function(){var t=Object(m.a)(s.a.mark((function t(n,a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().user.token,t.next=3,U(e.id,r);case 3:n({type:"DELETE_BLOG",data:e});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},getBlogs:L,openSignInRequiredModal:Z},Ae=Object(p.b)((function(e){return{blogs:e.blogs,user:e.user,layout:e.layout}}),Te)((function(e){var t,n=e.deleteBlog,c=e.getBlogs,u=e.blogs,l=e.user,i=e.openSignInRequiredModal,p=Object(o.g)(),f=Object(o.i)("/blogs/:id"),g=Object(a.useState)(null),b=Object(d.a)(g,2),h=b[0],v=b[1],O=Object(a.useState)(""),j=Object(d.a)(O,2),S=j[0],k=j[1],w=Object(a.useState)(!1),y=Object(d.a)(w,2),x=y[0],I=y[1];Object(a.useEffect)((function(){var e=f?f.params.id:null;C(e).then((function(e){v(e)}))}),[u]);var C=function(e){return(t=e,E.a.get("".concat(R,"/").concat(t)).then((function(e){return e.data}))).then((function(e){return e})).catch((function(){p.push("/")}));var t},N=function(){var e=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(h);case 3:return e.next=5,c();case 5:p.push("/"),I(!1),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),I(!1),window.localStorage.clear(),p.push("/signin");case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=9;break}return t.preventDefault(),e.next=4,A(h.id,{comment:S});case 4:n=e.sent,v(n),k(""),e.next=10;break;case 9:i();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();JSON.parse(window.localStorage.getItem("loggedBlogAppUser"));return null!==h?r.a.createElement(Ee,null,r.a.createElement(J.a,null,r.a.createElement(_e.a,{open:x,onCancel:function(){I(!1)},onConfirm:N}),r.a.createElement(Se,{blog:h,signedUser:l}),r.a.createElement(Re.a.Group,null,r.a.createElement(G.a,{as:"h3"}," Comments: "),h.comments.map((function(e,t){return r.a.createElement(Re.a,{key:e+t},r.a.createElement(Re.a.Content,null,r.a.createElement(Re.a.Author,{as:"a"},h.user.username),r.a.createElement(Re.a.Text,null,e)))})),!!l&&r.a.createElement(H.a,{reply:!0},r.a.createElement(H.a.TextArea,{value:S,onChange:function(e){e.preventDefault(),k(e.target.value)}}),r.a.createElement(z.a,{primary:!0,content:"Add comment",labelPosition:"left",icon:"edit",onClick:_}))),l&&(null===h||void 0===h?void 0:null===(t=h.user)||void 0===t?void 0:t.id)===(null===l||void 0===l?void 0:l.id)&&r.a.createElement(z.a,{content:"Delete blog",labelPosition:"left",icon:"trash",primary:!0,onClick:function(){I(!0)}}))):r.a.createElement(r.a.Fragment,null)})),Ue=function(){return r.a.createElement(Q.a,null,r.a.createElement(Q.a.Header,null,"Error 503."),r.a.createElement("p",null,"Couldn't reach the backend service."))},Be=function(){return r.a.createElement(Q.a,null,r.a.createElement(Q.a.Header,null,"Error 404."),r.a.createElement("p",null,"Page not found."))},De=n(253),Le=function(e){var t=e.component,n=Object(De.a)(e,["component"]),a=Object(p.c)(),c=Object(p.d)((function(e){return e.user})),u=window.localStorage.getItem("loggedBlogAppUser");return r.a.createElement(o.b,Object.assign({},n,{render:function(e){return function(){if(c)return!0;if(u){var e=JSON.parse(u);return a(b(e)),!0}return!1}()?r.a.createElement(t,e):r.a.createElement(o.a,{to:"/signin"})}}))},Me=function(){return r.a.createElement(l.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/signin"},r.a.createElement(be,null)),r.a.createElement(o.b,{path:"/signup"},r.a.createElement(ve,null)),r.a.createElement(o.b,{path:"/blogs/:id"},r.a.createElement(Ae,null)),r.a.createElement(o.b,{path:"/blogs"},r.a.createElement(we,null)),r.a.createElement(Le,{path:"/users/:id",component:Ne}),r.a.createElement(Le,{path:"/users",component:Ce}),r.a.createElement(o.b,{path:"/503"},r.a.createElement(Ue,null)),r.a.createElement(o.b,{path:"*"},r.a.createElement(Be,null))))},Pe=function(){var e=function(){var e=Object(a.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),u=Object(d.a)(c,2),l=u[0],o=u[1],i=Object(a.useState)(!1),p=Object(d.a)(i,2),f=p[0],E=p[1];return Object(a.useEffect)((function(){Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,E(!0),e.next=4,v();case 4:t=e.sent,r(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o(e.t0);case 11:return e.prev=11,E(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()}),[]),{data:n,error:l,loading:f}}(),t=(e.data,e.error);return e.loading?r.a.createElement("p",null,"Checking backend..."):t?r.a.createElement(Ue,null):r.a.createElement(Me,null)},Ge=n(62),He=n(254),Fe=n(255),ze=Object(Ge.combineReducers)({blogs:M,notification:_,user:h,layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SIGNIN_REQUIRED_MODAL_OPENNESS":return Object(X.a)({},e,{signInRequiredModalOpenness:t.openness});default:return e}}}),Qe=Object(Ge.createStore)(ze,Object(Fe.composeWithDevTools)(Object(Ge.applyMiddleware)(He.a)));console.log("initial store:",Qe.getState());var qe=Qe;n(448);u.a.render(r.a.createElement(p.a,{store:qe},r.a.createElement(Pe,null)),document.getElementById("root"))}},[[268,1,2]]]);
//# sourceMappingURL=main.f7fac165.chunk.js.map